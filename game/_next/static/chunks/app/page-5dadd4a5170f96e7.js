(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{347:()=>{},478:(e,t,n)=>{Promise.resolve().then(n.bind(n,4367))},4367:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(5155),l=n(2115);function s(){return Array.from({length:4},()=>Array.from({length:4},()=>Math.floor(4*Math.random())+1))}function a(e,t){return"".concat(e,",").concat(t)}function i(e){let[t,n]=e.split(",").map(Number);return[t,n]}function u(){let[e,t]=(0,l.useState)(null),[n,u]=(0,l.useState)(null),[o,c]=(0,l.useState)([]),[d,f]=(0,l.useState)(new Set),[h,m]=(0,l.useState)(0),[x,p]=(0,l.useState)(null),[b,g]=(0,l.useState)(null),[w,S]=(0,l.useState)(!1),[j,v]=(0,l.useState)(new Set);(0,l.useEffect)(()=>{let e=s();t(e),u(e)},[]);let N=(e,t)=>{if(!n)return!1;for(let r=0;r<e;r++)if(0!==n[r][t])return!1;return 0!==n[e][t]},k=(e,t)=>[[0,1],[1,0],[-1,0],[0,-1]].map(n=>{let[r,l]=n;return[e+r,t+l]}).filter(e=>{let[t,n]=e;return t>=0&&t<4&&n>=0&&n<4}).map(e=>{let[t,n]=e;return a(t,n)}),y=(e,t)=>{let n=a(e,t);if(!N(e,t)){let n=a(e-1,t);if(!d.has(n))return!1}if(d.has(n))return!1;if(0===d.size)return!0;for(let e of d){let[t,r]=i(e);if(k(t,r).includes(n))return!0}return!1},T=e=>{v(t=>{let n=new Set(t);return n.add(e),n}),setTimeout(()=>{v(t=>{let n=new Set(t);return n.delete(e),n})},500)},C=(e,t)=>{if(!n)return!1;g(Date.now()),p(setTimeout(()=>{let r=a(e,t);if(!y(e,t))return void T(r);let l=n[e][t];if(l+o.reduce((e,t)=>e+t,0)>6)return void T(r);let s=[...o,l],i=new Set(d);i.add(r),c(s),f(i),S(!0)},500))},E=(e,t)=>{if(!n)return!1;x&&(clearTimeout(x),p(null));let r=a(e,t);if(b&&Date.now()-b<500)if(w){if(!d.has(r))return void T(r);let e=n.map(e=>[...e]);for(let t of d){let[n,r]=i(t);e[n][r]=0}u(e),c([]),f(new Set),S(!1),m(h+1)}else{if(!N(e,t)||n[e][t]>6)return void T(r);u(n.map((n,r)=>n.map((n,l)=>r===e&&l===t?0:n))),m(h+1)}g(null)};return n?(0,r.jsxs)("div",{className:"p-6 flex flex-col items-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-black mb-4 tracking-wide font-mono",children:"UNSTACKLE"}),(0,r.jsxs)("div",{className:"flex space-x-3 mb-6",children:[(0,r.jsx)("button",{onClick:()=>{u(e),c([]),f(new Set),m(0),S(!1)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Reset"}),(0,r.jsx)("button",{onClick:()=>{c([]),f(new Set),S(!1)},className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded",children:"Reset Backlog"}),(0,r.jsx)("button",{onClick:()=>{let e=s();t(e),u(e),c([]),f(new Set),m(0),S(!1)},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded",children:"New Game"})]}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:n.map((e,t)=>e.map((e,n)=>{let l=a(t,n),s=d.has(l),i=j.has(l);return(0,r.jsx)("div",{onMouseDown:()=>C(t,n),onMouseUp:()=>E(t,n),className:"w-16 h-16 text-lg font-bold flex items-center justify-center border rounded select-none transition\n                  ".concat(0===e?"bg-gray-200 text-gray-500":s?"bg-yellow-400 text-black":"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer","\n                  ").concat(i?"shake":"","\n                "),children:0!==e?e:""},l)}))}),(0,r.jsxs)("div",{className:"mt-4 space-y-1 text-center",children:[(0,r.jsxs)("p",{children:["Backlog: ",o.length>0?o.join(", ")+" (Total: ".concat(o.reduce((e,t)=>e+t,0)," / ").concat(6,")"):"Empty"]}),(0,r.jsxs)("p",{children:["Turns Taken: ",h]})]})]}):null}function o(){return(0,r.jsx)("main",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,r.jsx)(u,{})})}n(347)}},e=>{var t=t=>e(e.s=t);e.O(0,[690,441,684,358],()=>t(478)),_N_E=e.O()}]);